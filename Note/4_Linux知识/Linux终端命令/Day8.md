## Linux学习

*复习笔记*

**Day8  **管道符、重定向

1. **（命令的）输入输出重定向** ：无论是输出还是输入，都要明确对象是命令，比如说输入重定向就是把文件导入到命令里，而输出重定向就是把命令原本要输出到屏幕的信息写入到一个指定文件里。

   两者之中输出重定向的使用频率更高，输出重定向又分为**标准输出重定向**和错误输出重定向，两者都有**覆盖写入**和**追加写入**两种模式。

   对于输入重定向来讲，用到的符号及其作用如表2-1所示。

   表2-1                                         输入重定向中用到的符号及其作用

   | 符号                 | 作用                                                         |
   | -------------------- | ------------------------------------------------------------ |
   | 命令 < 文件          | 将文件作为命令的标准输入                                     |
   | 命令 << 分界符       | 从标准输入中读入，直到遇见分界符才停止                       |
   | 命令 < 文件1 > 文件2 | 将文件1作为命令的标准输入并将标准输出到文件2（先输入再输出） |

   

   对于输出重定向来讲，用到的符号及其作用如表2-2所示。

   表2-2                                         输出重定向中用到的符号及其作用

   | 符号                               | 作用                                                         |
   | ---------------------------------- | ------------------------------------------------------------ |
   | 命令 > 文件(省略了1)               | 将标准输出重定向到一个文件中（清空原有文件的数据）           |
   | 命令 **2>** 文件                   | 将错误输出重定向到一个文件中（清空原有文件的数据）           |
   | 命令 >> 文件                       | 将标准输出重定向到一个文件中（追加到原有内容的后面）         |
   | 命令 **2>>** 文件                  | 将错误输出重定向到一个文件中（追加到原有内容的后面）         |
   | 命令 >> 文件 2>&1 或 命令 &>> 文件 | 将标准输出与错误输出共同写入到文件中（追加到原有内容的后面） |

   

2. **管道命令符： ** 作用为**把前一个命令原本要输出到屏幕的信息当作后一个命令的标准输入。**如果说输入输出重定向是命令与文件之间的关系，那么管道符就是命令与命令之间的关系。

   具体例子：

   * 把grep搜索命令的输出值传递给`wc`统计命令
   * 用`more`命令翻页的形式查看*/etc*目录中的文件列表（`ls`）及属性信息
   * 将`ps、grep、`管道符三者结合到一起使用
   * 通过把管道符和`passwd`命令的`--stdin`参数相结合，可以用一条命令来完成密码重置操作（在修改用户密码时，通常都需要输入两次密码以进行确认）。

   ```bash
   grep /sbin/nologin /etc/passwd | wc -l
   ls -l /etc/ | more
   echo "niko" | passwd --stdin root
   ps aux | grep bash
   ```

   如果需要将管道符处理后的结果既输出到屏幕，又同时写入到文件中，则可以与tee命令结合使用。

   下述命令将显示系统中所有与bash相关的进程信息，并同时将输出到屏幕和文件中：

   ```bash
   ps aux | grep bash | tee result.txt
   ```

